# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
web/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py          # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ web.py               # –û—Å–Ω–æ–≤–Ω–æ–µ Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (241 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îî‚îÄ‚îÄ dp.py                # –ú–æ–¥–µ–ª–∏ –ë–î (User, Comment)
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îú‚îÄ‚îÄ base.html            # –ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω
‚îÇ   ‚îú‚îÄ‚îÄ index.html           # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ comments.html        # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
‚îÇ   ‚îú‚îÄ‚îÄ comments_section.html # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
‚îÇ   ‚îú‚îÄ‚îÄ social_login.html    # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ login.html
‚îÇ   ‚îú‚îÄ‚îÄ consent.html
‚îÇ   ‚îî‚îÄ‚îÄ 404.html, 500.html
‚îú‚îÄ‚îÄ static/
‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ styles.css       # –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ images/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ github-logo.gif
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ telegram.gif
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ me.png
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ favicon/
‚îú‚îÄ‚îÄ .env                     # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ .env.example             # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ .gitignore               # –§–∞–π–ª—ã –¥–ª—è –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è Git
‚îú‚îÄ‚îÄ requirements.txt         # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ run.py                   # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ site.db                  # SQLite –ë–î
‚îî‚îÄ‚îÄ venv/                    # –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

Documentation files:
‚îú‚îÄ‚îÄ README.md                # –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ OAUTH_SETUP.md           # –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ OAuth
‚îú‚îÄ‚îÄ DEPLOYMENT.md            # –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ INTEGRATION_REPORT.md    # –û—Ç—á–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ QUICK_REFERENCE.md       # –ö—Ä–∞—Ç–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞
‚îî‚îÄ‚îÄ CHANGELOG.md             # –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
```

## üîç –û—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏

### –ú–æ–¥–µ–ª–∏ (src/dp.py)

#### Class User
```python
class User(db.Model):
    id: int                          # Primary key
    nickname: str                    # –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    avatar: str                      # URL –∞–≤–∞—Ç–∞—Ä–∞
    yandex_id: str (nullable)        # ID –Ø–Ω–¥–µ–∫—Å–∞
    vc_id: str (nullable)            # ID VK
    tg_id: str (nullable)            # ID Telegram
    email: str (nullable)            # Email
    created_at: datetime             # –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è
    comments: relationship           # –°–≤—è–∑—å —Å Comment
```

#### Class Comment
```python
class Comment(db.Model):
    id: int                          # Primary key
    text: str                        # –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
    created_at: datetime             # –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è
    page: str                        # –°—Ç—Ä–∞–Ω–∏—Ü–∞ (default: 'comments')
    user_id: int                     # FK –Ω–∞ User
```

### –ì–ª–∞–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (src/web.py)

#### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- `auth_yandex()` - –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç OAuth –ø–æ—Ç–æ–∫
- `auth_yandex_callback()` - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç callback –æ—Ç –Ø–Ω–¥–µ–∫—Å–∞
- `logout()` - –≤—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã

#### –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- `add_comment()` - –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
- `delete_comment(id)` - —É–¥–∞–ª—è–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
- `get_comments(page)` - API –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤

#### –°—Ç—Ä–∞–Ω–∏—Ü—ã
- `index()` - –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- `comments()` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- `social_login()` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

#### Utilities
- `login_required()` - –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –∑–∞—â–∏—Ç—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤
- `page_not_found(e)` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ 404 –æ—à–∏–±–æ–∫
- `internal_server_error(e)` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ 500 –æ—à–∏–±–æ–∫

## üîê OAuth –ø–æ—Ç–æ–∫ –≤ –¥–µ—Ç–∞–ª—è—Ö

### 1. –ò–Ω–∏—Ü–∏–∞—Ü–∏—è (`/auth/yandex`)

```python
@app.route('/auth/yandex')
def auth_yandex():
    params = {
        'response_type': 'code',
        'client_id': YANDEX_CLIENT_ID,
        'redirect_uri': YANDEX_REDIRECT_URI,
        'state': 'security_token'
    }
    return redirect(f"{YANDEX_OAUTH_AUTHORIZE_URL}?{urlencode(params)}")
```

**Flow:**
1. –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã OAuth –∑–∞–ø—Ä–æ—Å–∞
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ oauth.yandex.ru
3. –Ø–Ω–¥–µ–∫—Å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞

### 2. Callback –æ–±—Ä–∞–±–æ—Ç–∫–∞ (`/auth/yandex/callback`)

```python
@app.route('/auth/yandex/callback')
def auth_yandex_callback():
    # 1. –ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    code = request.args.get('code')
    
    # 2. –û–±–º–µ–Ω—è—Ç—å –∫–æ–¥ –Ω–∞ access token
    token_response = requests.post(YANDEX_OAUTH_TOKEN_URL, data={
        'grant_type': 'authorization_code',
        'code': code,
        'client_id': YANDEX_CLIENT_ID,
        'client_secret': YANDEX_CLIENT_SECRET
    })
    access_token = token_response.json().get('access_token')
    
    # 3. –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø—Ä–æ—Ñ–∏–ª—è
    user_response = requests.get(YANDEX_USER_INFO_URL, headers={
        'Authorization': f'OAuth {access_token}'
    })
    user_info = user_response.json()
    
    # 4. –°–æ–∑–¥–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    user = User.query.filter_by(yandex_id=user_info.get('id')).first()
    if not user:
        user = User(
            nickname=user_info.get('display_name'),
            yandex_id=user_info.get('id'),
            email=user_info.get('default_email'),
            avatar=f"https://avatars.yandex.net/get-yapic/{user_info['default_avatar_id']}/islands-200"
        )
        db.session.add(user)
    else:
        user.nickname = user_info.get('display_name')
        user.email = user_info.get('default_email')
    db.session.commit()
    
    # 5. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Å—Å–∏—é
    session['user_id'] = user.id
    session['user_nickname'] = user.nickname
    session['user_avatar'] = user.avatar
    
    return redirect(url_for('comments'))
```

## üé® Frontend —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### –®–∞–±–ª–æ–Ω—ã (templates/)

#### base.html
- –ù–∞—Å–ª–µ–¥—É–µ–º—ã–π –±–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω
- –ù–∞–≤–∏–≥–∞—Ü–∏—è —Å–≤–µ—Ä—Ö—É
- –ë–ª–æ–∫–∏: navigation, auth_buttons, side_icons, content, scripts
- –°—Ç–∏–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã

#### index.html
- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- –ü—Ä–æ—Ñ–∏–ª—å–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞
- –†–∞–∑–¥–µ–ª "–û–±–æ –º–Ω–µ"
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–∞—Ö
- –°–ø–∏—Å–æ–∫ –Ω–∞–≤—ã–∫–æ–≤
- JavaScript –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏

#### comments.html
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ
- –ü–æ–¥–∫–ª—é—á–∞–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç comments_section.html

#### comments_section.html
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- –§–æ—Ä–º–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è (–µ—Å–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω)
- –°–ø–∏—Å–æ–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ —Å –∞–≤–∞—Ç–∞—Ä–∞–º–∏
- –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –¥–ª—è —Å–≤–æ–∏—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- CSS —Å—Ç–∏–ª–∏

#### social_login.html
- –ö–Ω–æ–ø–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–Ø–Ω–¥–µ–∫—Å, Telegram)
- –°—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ–ª–∏—Ç–∏–∫—É –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç

### –°—Ç–∏–ª–∏ (static/css/)

#### styles.css
- –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ (dark mode)
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
- –ê–Ω–∏–º–∞—Ü–∏–∏
- Grid –∏ Flexbox
- Custom scrollbars

## üîÑ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### Error handlers –≤ Flask

```python
@app.errorhandler(404)
def page_not_found(e):
    return render_template('404.html'), 404

@app.errorhandler(500)
def internal_server_error(e):
    return render_template('500.html'), 500
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ OAuth –æ—à–∏–±–æ–∫

```python
try:
    # OAuth –ª–æ–≥–∏–∫–∞
except requests.RequestException as e:
    flash('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å', 'error')
    return redirect(url_for('social_login'))
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—É—Å—Ç–æ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
if not text:
    flash('–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º', 'error')
    return redirect(url_for('comments'))

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ —É–¥–∞–ª–µ–Ω–∏—è
if comment.user_id != session['user_id']:
    flash('–í—ã –Ω–µ –º–æ–∂–µ—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π', 'error')
    return redirect(url_for('comments'))
```

## üîß –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏

1. **–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ –≤ –º–æ–¥–µ–ª—å User:**
```python
# src/dp.py
google_id = db.Column(db.String(100), nullable=True)
```

2. **–°–æ–∑–¥–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:**
```python
# src/web.py
@app.route('/auth/google')
def auth_google():
    # OAuth –ª–æ–≥–∏–∫–∞
    pass

@app.route('/auth/google/callback')
def auth_google_callback():
    # Callback –ª–æ–≥–∏–∫–∞
    pass
```

3. **–î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É –≤ —à–∞–±–ª–æ–Ω:**
```html
<!-- templates/social_login.html -->
<a href="{{ url_for('auth_google') }}" class="social-btn google">
    <i class="fab fa-google"></i>
    –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google
</a>
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –º–æ–¥–µ–ª–∏

```python
# src/dp.py
class Like(db.Model):
    __tablename__ = 'like'
    
    id = db.Column(db.Integer, primary_key=True)
    user_id = db.Column(db.Integer, db.ForeignKey('user.id'), nullable=False)
    comment_id = db.Column(db.Integer, db.ForeignKey('comment.id'), nullable=False)
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞

```python
# src/web.py
@app.route('/new-feature', methods=['GET', 'POST'])
@login_required  # –ï—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
def new_feature():
    if request.method == 'POST':
        # –û–±—Ä–∞–±–æ—Ç–∫–∞ POST –∑–∞–ø—Ä–æ—Å–∞
        return redirect(url_for('index'))
    return render_template('new_feature.html')
```

## üìä –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```env
# –û—Å–Ω–æ–≤–Ω–æ–µ
SECRET_KEY                      # –ö–ª—é—á –¥–ª—è —Å–µ—Å—Å–∏–π

# –Ø–Ω–¥–µ–∫—Å OAuth
YANDEX_CLIENT_ID               # Client ID –æ—Ç –Ø–Ω–¥–µ–∫—Å–∞
YANDEX_CLIENT_SECRET           # Client Secret –æ—Ç –Ø–Ω–¥–µ–∫—Å–∞
YANDEX_REDIRECT_URI            # Callback URL

# –ë–î (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
DATABASE_URL                   # –°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ë–î
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit tests —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```python
# tests/test_auth.py
import unittest
from src.web import app, db
from src.dp import User

class TestAuth(unittest.TestCase):
    def setUp(self):
        app.config['TESTING'] = True
        self.app = app
        self.client = app.test_client()
        
        with app.app_context():
            db.create_all()
    
    def test_login_page(self):
        response = self.client.get('/social_login')
        self.assertEqual(response.status_code, 200)
    
    def tearDown(self):
        with app.app_context():
            db.session.remove()
            db.drop_all()

if __name__ == '__main__':
    unittest.main()
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
python -m pytest tests/
python -m unittest discover
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ production

```python
# src/web.py
import logging
from logging.handlers import RotatingFileHandler

if not app.debug:
    file_handler = RotatingFileHandler(
        '/var/log/portfolio/flask.log',
        maxBytes=10240,
        backupCount=10
    )
    file_handler.setFormatter(logging.Formatter(
        '%(asctime)s %(levelname)s: %(message)s'
    ))
    app.logger.addHandler(file_handler)
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# Development
# –õ–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª—å –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ python3 run.py

# Production
tail -f /var/log/portfolio/flask.log
sudo journalctl -u portfolio -f
```

## üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ë–î

```python
# –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
class Comment(db.Model):
    __table_args__ = (
        db.Index('idx_comment_page_created', 'page', 'created_at'),
        db.Index('idx_comment_user_id', 'user_id'),
    )
```

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
from flask_caching import Cache

cache = Cache(app, config={'CACHE_TYPE': 'simple'})

@app.route('/api/comments/<page>')
@cache.cached(timeout=60)
def get_comments(page):
    # ...
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —à–∞–±–ª–æ–Ω–æ–≤

- –ú–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è CSS/JS
- Lazy loading –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- CDN –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

## üìù Code standards

### –°—Ç–∏–ª—å –∫–æ–¥–∞

–°–ª–µ–¥—É–µ–º PEP 8:
```python
# ‚úÖ –•–æ—Ä–æ—à–æ
user_name = "John Doe"
def get_user_comments(user_id):
    pass

# ‚ùå –ü–ª–æ—Ö–æ
userName = "John Doe"
def getusrcommnts(uid):
    pass
```

### –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
def auth_yandex_callback():
    """
    –û–±—Ä–∞–±–æ—Ç—á–∏–∫ callback –æ—Ç –Ø–Ω–¥–µ–∫—Å OAuth.
    
    –ü–æ–ª—É—á–∞–µ—Ç –∫–æ–¥ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –æ–±–º–µ–Ω–∏–≤–∞–µ—Ç –Ω–∞ access token,
    –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø—Ä–æ—Ñ–∏–ª—è –∏ —Å–æ–∑–¥–∞–µ—Ç/–æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    
    Returns:
        –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /comments –ø—Ä–∏ —É—Å–ø–µ—Ö–µ
        –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /social_login –ø—Ä–∏ –æ—à–∏–±–∫–µ
    """
    pass
```

## üêõ Debugging

### Flask debug mode

```bash
export FLASK_DEBUG=1
python3 run.py
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ debugger

```python
from flask import debugged

@app.route('/debug')
def debug_page():
    debugged()  # –¢–æ—á–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–∞
    return 'OK'
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

```python
app.logger.info(f"User {user.id} logged in")
app.logger.error(f"Error: {e}")
app.logger.warning(f"Warning: {msg}")
```

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- Flask –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://flask.palletsprojects.com/
- SQLAlchemy –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://docs.sqlalchemy.org/
- –Ø–Ω–¥–µ–∫—Å OAuth API: https://yandex.ru/dev/oauth/
- Bootstrap –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://getbootstrap.com/
- Font Awesome –∏–∫–æ–Ω–∫–∏: https://fontawesome.com/

## üéì –î–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö

1. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ README.md
2. –ò–∑—É—á–∏—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ñ–∞–π–ª–æ–≤
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ
4. –ü—Ä–æ–π–¥–∏—Ç–µ—Å—å –ø–æ –∫–æ–¥—É –≤ src/web.py
5. –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–æ—Å—Ç—É—é —Ñ—É–Ω–∫—Ü–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, health check)
6. –ù–∞–ø–∏—à–∏—Ç–µ —é–Ω–∏—Ç —Ç–µ—Å—Ç
7. –°–¥–µ–ª–∞–π—Ç–µ Pull Request

---

**–í–µ—Ä—Å–∏—è:** 1.0.0
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 20.12.2025
**–°—Ç–∞—Ç—É—Å:** Production Ready ‚úÖ
